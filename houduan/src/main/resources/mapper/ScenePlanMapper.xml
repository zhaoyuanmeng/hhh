<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xaxc.teqin.mapper.ScenePlanMapper">

    <select id="getScenePlanNodeByTaskId" resultType="com.xaxc.teqin.model.entity.ScenePlan">
        SELECT P.*, i.scene_name as sceneName
        FROM scene_plan P
                 LEFT JOIN scene_info i
                           ON P.scene_id = i.ID
        WHERE i.task_id = #{ taskId }
          AND type = #{type}
    </select>

    <select id="getScenePlanOfNode" resultType="com.xaxc.teqin.model.entity.ScenePlan">
        SELECT *
        FROM scene_plan
        WHERE scene_id = #{sceneId} AND plan_node = #{planNode}
    </select>

</mapper>
